# MicroSD

## Вариации

Размеры карты

* 128 MB - 2 GB (SD)
* 4 GB - 32 GB (SDHC)
* 64 GB - 2 TB (SDXC)

Классы быстродействия

* Class 2 2 MB/s
* Class 4 4 MB/s
* Class 6 6 MB/s
* Class 8 8 MB/s
* Class 10 10 MB/s
* UHS-1 10 MB/s
* UHS-3 30 MB/s

Производитель карты

* Брендовая карта (Smasung, Kingston, Transcend)
* NoName

При необходимости, рекомендуется повторить тест несколько раз на картах MicroSD различных типов и размеров

## Подготовка к тесту

* Карта MicroSD, отформатированная в файловой системе FAT.
* Прошивка для тестирования SD карты (чтение, запись, расчет контрольной суммы)

## Тестирование

* Вставить в устройство карту, убедиться, что карта примонтирована успешно
* Записать на флеш карту файл с данными и файл с контрольной суммой по этим данным
* Переподключить карту к устройству, убедиться, что карта примонтирована успешно
* Считать файл с флеш карты, рассчитать контрольную сумму
* Прочитать контрольную сумму из файла с контрольной суммой и сравнить с рассчитанной.

Результат

Если контрольная сумма совпадает с контрольной суммой ранее записанного файла, тест считать пройденным

# Firmware

Прошивка для тестирования выполняет следующие шаги (в порядке уровней абстракции)

* Инициализация SPI шины 
* Проверка обмена данными с чипом SD карты
* Работа с картой, как с блочным устройством
* Монтирование файловой системы
* Работа с файлами

Функции прошивки

* Запись на флеш карту бинарного файла (размером не менее 1 МБ) со случайными данными
	* Запись контрольной суммы этого файла в файл контрольной суммы, который размещается рядом
* Считывание файла, расчет контрольной суммы
	* Считывание записанной контрольной суммы, сравнение рассчитанных и прочитанных значений.

При возникновении ошибок на каждом шаге - прошивка сообщает об этом, для упрощения отладки.




